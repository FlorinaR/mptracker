{% extends 'layout.html' %}


{% block content %}
  <h1>{{ party['name'] }}</h1>

  <div class="row">
    <div class="col-sm-8">
      <h3>Domenii de politici publice</h3>

      <ul>
        {%- for policy in policy_domains %}
          <li>
            {{ policy.name|link_for(
                '.party_policy',
                party_short_name=party.short_name,
                policy_slug=policy.slug,
              ) }}
            ({{ policy.interest|percent }})
          </li>
        {%- endfor %}
      </ul>
    </div>

    <div class="col-sm-4">
      <div>
        <h4>Statistici</h4>

        <dl class="dl-horizontal">
          <dt>loialitatea membrilor</dt>
          <dd>{{ party['loyalty']['all']|percent }}</dd>

          {%- if 'to-cabinet' in party['loyalty'] %}
            <dt>loialitate pentru guvern</dt>
            <dd>{{ party['loyalty']['to-cabinet']|percent }}</dd>
          {%- endif %}

          {%- for category, value in party['loyalty']['by-category'].items() %}
            {%- set title = POSITION_CATEGORY_TITLE.get(category, category) %}
            <dt>{{ title }}</dt>
            <dd>{{ value|percent }}</dd>
          {%- endfor %}

          <dt>membri la primul mandat</dt>
          <dd>{{ party['loyalty']['by-mandate-count']['one']|percent }}</dd>

          <dt>membri cu mai multe mandate</dt>
          <dd>{{ party['loyalty']['by-mandate-count']['multiple']|percent }}</dd>

          <dt>întrebări</dt>
          <dd>{{ party['questions']['total'] }}</dd>

          <dt>întrebări cu subiect local</dt>
          <dd>
            {{ party['questions']['local'] }}
            {% if party['questions']['total'] %}
              {%- set fraction = (party['questions']['local'] /
                                  party['questions']['total']) %}
              ({{ fraction|percent }})
            {% endif %}
          </dd>
        </dl>
      </div>

      <div>
        <h4>Membri</h4>
        {% set url = url_for('.party_members', party_short_name=party.short_name) %}
        <a href="{{ url }}">Lista completă ({{ party['member_list']|count }})</a>
      </div>
    </div>
  </div>

{% endblock %}
