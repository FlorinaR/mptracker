{% extends 'layout.html' %}


{% block content %}
<div class="container-content parties-content">
    <div class="col-sm-12">
      <ul class="parties-list">
        {% for party in party_list %}
          <li>
            {%- set url = url_for('.party_detail', party_short_name=party.short_name) %}
            <a href="{{ url }}">{{ party.name }}</a>
          </li>
        {% endfor %}
      </ul>
    </div>

    <div class="col-sm-12">
        <div class="seatchart"></div>
    </div>
</div>
{% endblock %}


{% block scripts %}
<script src="{{ url_for('static',
    filename='lib/d3-3.3.13/d3.v3.js') }}"></script>
<script src="{{ url_for('static', filename='seatchart.js') }}"></script>
<script>
(function() {
  "use strict";

  $(document).ready(render);
  $(window).resize(render);

  function render() {
    app.render_seatchart({
      container: $('.seatchart').empty()[0],
      total: {{ seats_total }},
      highlight: {{ seats|tojson }}
    });
  }

})();
</script>
{% endblock %}
